<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="MFIN7036 Students 2025" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="Group NullPointer, Blog 2, " />

<meta property="og:title" content="The Role of NLP Sentiment in U.S. Election Stock Performance "/>
<meta property="og:url" content="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/the-role-of-nlp-sentiment-in-us-election-stock-performance.html" />
<meta property="og:description" content="By Group &#34;NullPointer&#34; Title: The Role of NLP Sentiment in U.S. Election Stock Performance Date: 2025-03-10 10:00 Author: NullPointer Category: Finance Tags: 2024 election, stock market, NLP, sentiment analysis 1. Link between NLP and U.S. Election-related Stock Performance Introduction With elections being a pivotal event that influences …" />
<meta property="og:site_name" content="MFIN7036 Student Blog 2025" />
<meta property="og:article:author" content="MFIN7036 Students 2025" />
<meta property="og:article:published_time" content="2025-03-10T00:00:00+08:00" />
<meta name="twitter:title" content="The Role of NLP Sentiment in U.S. Election Stock Performance ">
<meta name="twitter:description" content="By Group &#34;NullPointer&#34; Title: The Role of NLP Sentiment in U.S. Election Stock Performance Date: 2025-03-10 10:00 Author: NullPointer Category: Finance Tags: 2024 election, stock market, NLP, sentiment analysis 1. Link between NLP and U.S. Election-related Stock Performance Introduction With elections being a pivotal event that influences …">

        <title>The Role of NLP Sentiment in U.S. Election Stock Performance  · MFIN7036 Student Blog 2025
</title>
        <link href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="MFIN7036 Student Blog 2025 - Full Atom Feed" />



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/"><span class=site-name>MFIN7036 Student Blog 2025</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://buehlmaier.github.io/MFIN7036-student-blog-2025-01
                                    >Home</a>
                                </li>
                                <li ><a href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/categories.html">Categories</a></li>
                                <li ><a href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/tags.html">Tags</a></li>
                                <li ><a href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/the-role-of-nlp-sentiment-in-us-election-stock-performance.html">
                The Role of NLP Sentiment in U.S. Election Stock Performance
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <p>By Group "NullPointer"</p>
<p>Title: The Role of NLP Sentiment in U.S. Election Stock Performance <br>
Date: 2025-03-10 10:00<br>
Author: NullPointer<br>
Category: Finance<br>
Tags: 2024 election, stock market, NLP, sentiment analysis  </p>
<h1><strong>1. Link between NLP and U.S. Election-related Stock Performance</strong></h1>
<h3><strong>Introduction</strong></h3>
<p>With elections being a pivotal event that influences various sectors of the economy, we sought to investigate how public sentiment, as expressed through social media, correlates with fluctuations in the stock market. Specifically, we focused on leveraging Natural Language Processing (NLP) techniques to uncover patterns and insights that might shed light on this complex relationship. </p>
<h3><strong>Methodology</strong></h3>
<p>To begin, we collected a large dataset of tweets related to the U.S. election, sourced from the social media platform X. Our next step involved generating word clouds to visually explore the potential link between the content of these tweets and stock market performance. To ensure the clarity and relevance of our findings, we preprocessed the data by excluding stop words—common words like <code>the</code>, <code>and</code>, <code>or</code>, <code>is</code>that carry little semantic weight—as well as overtly political terms such as <code>election</code>,  <code>vote</code>, or <code>party names</code>. This allowed us to narrow our focus exclusively to financial and economic terminology, which we hypothesized would more directly reflect market-related sentiment. </p>
<h3><strong>Results and Discussion</strong></h3>
<p>From our results, several key observations emerged. <br>
<img alt="WordCloud of Tweets Related to Democrats Linked to Finance" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-democrats.png"> <br>
<img alt="WordCloud of Tweets Related to Republicans Linked to Finance" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-republicans.png"> <br>
The word <code>stock</code> appeared with notable frequency in tweets associated with both the Democratic and Republican parties, suggesting that discussions about stock market performance transcend partisan lines during election periods. Other financial terms, such as <code>market</code>, <code>investment</code>, and <code>economy</code>, also surfaced prominently, reinforcing the idea that election-related discourse on social media often intersects with economic concerns. This consistent presence of financial vocabulary across party affiliations points to a meaningful connection between tweet content and stock market activity. Our findings indicate that NLP can serve as a powerful tool for extracting actionable insights from unstructured social media data, potentially aiding investors, analysts, and policymakers in understanding how public sentiment during elections might influence financial markets. </p>
<h1><strong>2. Sentiment Factor Construction</strong></h1>
<h3><strong>Methodology</strong></h3>
<ul>
<li>
<p><strong>Tweet Classification</strong>:<br>
<strong>+1</strong> if it supports Republicans/Trump<br>
<strong>-1</strong> if it supports Democrats/Biden/Harris<br>
<strong>0</strong> if neutral  </p>
</li>
<li>
<p><strong>Daily Sentiment Score Calculation</strong>:<br>
    Average sentiment score across all tweets each day<br>
<strong>Formula</strong>:<br>
<img alt="Formulat for Sentiment Score" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-Formula1.png"></p>
<ul>
<li><strong>Time Decay Factor</strong>: Higher weight assigned to tweets closer to election day<br>
<strong>Formula</strong>:<br>
    <img src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-Formula2.png" alt="Formula for Time Decay Factor" width="50%">  </li>
</ul>
</li>
<li><strong>Sentiment Score gotten above</strong> <br>
<img alt="Sentiment Score for both parties" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-Sentiment_score.png">  </li>
</ul>
<hr>
<h1><strong>3. Investment Strategy Preparation</strong></h1>
<h3><strong>Portfolio Construction</strong></h3>
<ul>
<li>Selected <strong>top 10 corporate donors</strong> of each party as benchmark portfolios  </li>
<li><strong>At 3:00 PM US/Eastern Time</strong>, calculated sentiment score using the past 24-hour data  </li>
<li>Computed <strong>Relative Sentiment Factor</strong>:<br>
  -- <strong>Republican Sentiment Factor</strong> = Republican Sentiment Score - Democratic Sentiment Score  </li>
</ul>
<h3><strong>Standardization Process</strong></h3>
<ul>
<li><strong>20-day rolling standardization</strong>  </li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">rs</span><span class="p">[</span><span class="s1">&#39;Sentiment_Factor&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">(</span>
    <span class="n">rs</span><span class="p">[</span><span class="s1">&#39;Sentiment_Factor&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">rs</span><span class="p">[</span><span class="s1">&#39;Sentiment_Factor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="n">min_periods</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="p">)</span><span class="o">/</span><span class="n">rs</span><span class="p">[</span><span class="s1">&#39;Sentiment_Factor&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="n">min_periods</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
</code></pre></div>

<ul>
<li>Analyzed correlation between <strong>factor change rate and future portfolio returns</strong>  </li>
<li>Found a <strong>stable negative correlation</strong> between them<br>
<img alt="IC of Republicans" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-IC_of_Republicans.png"></li>
<li>Note: IC(Information Coefficient) means cummulative correlations between future returns and features in a rolling window(we set window size = 20).
      Using the code below:  </li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">rs</span><span class="p">[</span><span class="s1">&#39;Sentiment Factor change rate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">rs</span><span class="p">[</span><span class="s1">&#39;return&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
</code></pre></div>

<hr>
<h1><strong>4. Timing Strategy Implementation</strong></h1>
<h3><strong>Market Trading Strategy Based on Sentiment Factor</strong></h3>
<p><strong>Benchmark strategy</strong>: Long the portfolio.<br>
We will choose the right time to <strong>short</strong> the portfolio according to the factor value beyond the <strong>Benchmark strategy</strong>.  </p>
<h5><strong>For Republican portfolio</strong></h5>
<ul>
<li><strong>When sentiment factor &gt; 80th percentile of past 20 days</strong>: Short the Republican portfolio<br>
    Then we can get the performance below:<br>
<img alt="Cummulative Return of Republican Portfolio(Without_cost)" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-Cummulative_Return_Republican_Portfolio(Without_cost).png">  </li>
<li><strong>When sentiment factor &gt; 90th percentile</strong>: Adopt a stricter short-selling strategy<br>
<img alt="Cummulative Return of Republican Portfolio(Without_cost)" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-Cummulative_Return_Republican_Portfolio(Without_cost)_90.png">  </li>
</ul>
<h5><strong>For Democratic portfolio</strong></h5>
<ul>
<li><strong>Applied the same methodology to the Democratic Sentiment Factor</strong><br>
    IC and returns are below:<br>
<img alt="IC of Democrats" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-IC_of_Democrats.png">
<img alt="Cummulative Return of Democratic Portfolio(Without_cost)" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-Cummulative_Return_Democratic_Portfolio(Without_cost).png"></li>
</ul>
<h3><strong>Conclusion</strong></h3>
<ul>
<li><strong>Economic Explaination</strong>: Both factors show the negative correlation with the stock returns. That implies such a scenario that prices will go irrationally high when people feel optimistic about any party's election, which is a kind of <strong>Market Overheating</strong>.</li>
<li><strong>Backtesting results</strong> showed that sentiment-based strategies improved returns.  </li>
<li>Demonstrate that <strong>market sentiment has predictive power over stock prices</strong>  </li>
</ul>
<hr>
<h1><strong>6. Econometric analysis</strong></h1>
<h3><strong>6.1 Who the CEO support?</strong></h3>
<p>The website used to scrape information about which political party these CEOs support is the Federal Election Commission (FEC). It is a public website where after entering the name of the company's CEO, it returns information about the CEO's political campaign contributions. The political party stance of the company is judged based on the CEO's political campaign contributions during the general election period. For example, the following picture shows the results when searching for Elon Musk on the FEC website.</p>
<h3><strong>6.2 Fundamental Data and Monthly Return</strong></h3>
<p>I use wrds to derive the fundamental data of the company in S&amp;P 500 as the control variables in two-way fixed effect regression. First, I get the company name from wrds and then get the permno of those company.</p>
<div class="highlight"><pre><span></span><code><span class="n">conn</span> <span class="o">=</span> <span class="n">wrds</span><span class="o">.</span><span class="n">Connection</span><span class="p">()</span>

<span class="n">tickers</span> <span class="o">=</span> <span class="n">party</span><span class="p">[</span><span class="s1">&#39;ticker&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">result_df</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">raw_sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SELECT permno, ticker FROM crsp.stocknames WHERE ticker IN (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">tickers</span><span class="p">])</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div>

<p>Subsequently, I obtained the monthly average returns and fundamental data of the stocks through the following code:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># monthlly return</span>
<span class="n">return_data</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">raw_sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">SELECT </span>
<span class="s2">    permno, </span>
<span class="s2">    date, </span>
<span class="s2">    ret </span>
<span class="s2">FROM </span>
<span class="s2">    crsp.msf </span>
<span class="s2">WHERE </span>
<span class="s2">    permno IN (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">permno_list</span><span class="p">))</span><span class="si">}</span><span class="s2">)</span>
<span class="s2">    AND date BETWEEN &#39;</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2">&#39; AND &#39;</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">&#39;</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">return_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">return_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

<span class="n">monthly_avg_return</span> <span class="o">=</span> <span class="n">return_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;permno&#39;</span><span class="p">,</span><span class="n">return_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)])[</span><span class="s1">&#39;ret&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">monthly_avg_return</span> <span class="o">=</span> <span class="n">monthly_avg_return</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">merged_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">monthly_avg_return</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;permno&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="n">merged_df</span> <span class="o">=</span> <span class="n">merged_df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>

<span class="c1"># fundamental data</span>
<span class="n">fund_data</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">raw_sql</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    SELECT gvkey, datadate as date, tic as ticker, at, sale, ni, lt, che, revt, ceq</span>
<span class="s2">    FROM comp.funda</span>
<span class="s2">    WHERE tic IN </span><span class="si">{</span><span class="nb">tuple</span><span class="p">(</span><span class="n">merged_df</span><span class="p">[</span><span class="s1">&#39;ticker&#39;</span><span class="p">])</span><span class="si">}</span>
<span class="s2">        AND datafmt = &#39;STD&#39;</span>
<span class="s2">        AND consol = &#39;C&#39;</span>
<span class="s2">        AND indfmt = &#39;INDL&#39;</span>
<span class="s2">        AND datadate &gt;= &#39;2020-01-01&#39;</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">convert_to_monthly</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;ME&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>
<span class="k">return</span> <span class="n">group</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">individual_controls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">,</span> <span class="s1">&#39;sale&#39;</span><span class="p">,</span> <span class="s1">&#39;ni&#39;</span><span class="p">,</span> <span class="s1">&#39;lt&#39;</span><span class="p">,</span> <span class="s1">&#39;che&#39;</span><span class="p">,</span> <span class="s1">&#39;revt&#39;</span><span class="p">,</span> <span class="s1">&#39;ceq&#39;</span> <span class="p">]</span>
<span class="n">fund_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">fund_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
<span class="n">fund_data</span> <span class="o">=</span> <span class="n">fund_data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>
<span class="n">monthly_data</span> <span class="o">=</span> <span class="n">fund_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;ticker&#39;</span><span class="p">)[</span><span class="n">individual_controls</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">convert_to_monthly</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">monthly_data</span> <span class="o">=</span> <span class="n">monthly_data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;level_1&#39;</span><span class="p">])</span>

<span class="n">start_timestamp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="n">end_timestamp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">end_date</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">))</span>

<span class="n">monthly_data</span>  <span class="o">=</span> <span class="n">monthly_data</span> <span class="p">[(</span><span class="n">monthly_data</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start_timestamp</span><span class="p">)</span> <span class="o">&amp;</span> 
                <span class="p">(</span><span class="n">monthly_data</span> <span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end_timestamp</span><span class="p">)]</span>

<span class="n">monthly_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">monthly_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="n">merged_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">merged_df</span><span class="p">,</span> <span class="n">monthly_data</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ticker&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="n">merged_data</span> <span class="o">=</span> <span class="n">merged_data</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>

<span class="n">merged_data</span> <span class="o">=</span> <span class="n">merged_data</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<p>Then I merged all of those data and clean them and generate those variables I really need.</p>
<div class="highlight"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="n">only_trump</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;sponsored&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Trump&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">only_harris</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;sponsored&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Harris&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">only_republican</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;party&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Republican&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">only_democratic</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;party&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Democratic&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">trump_harris</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;sponsored&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Trump, Harris&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">both_parties</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;party&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Republican, Democratic&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">sentiment</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;party&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Republican&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;sentiment_repub&#39;</span><span class="p">],</span> 
                                   <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;party&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Democratic&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;sentiment_democ&#39;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
                                  <span class="p">)</span>
<span class="p">)</span>
<span class="c1"># missing data</span>
<span class="n">data</span><span class="p">[</span><span class="n">individual_controls</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;ret&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;permno&#39;</span><span class="p">)[</span><span class="n">individual_controls</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;ret&#39;</span><span class="p">]</span> <span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()))</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">data</span><span class="p">[</span><span class="s1">&#39;log_at&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">])</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;lt_over_at&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;lt&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Asset_Turnover_Ratio&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;revt&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;roe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ni&#39;</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;lt&#39;</span><span class="p">])</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;log_che&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;che&#39;</span><span class="p">])</span>
</code></pre></div>

<h2><strong>6.3 Regression</strong></h2>
<p>I use two-way fixed effect model to find the relationship between the political stance of CEO and monthly return during the election. The model is as follows:</p>
<p><img alt="model" src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/images/NullPointer_02_image-model.png"></p>
<p>The result is as the following table. It means the influence on monthly returns of people who hate or like democratic is more significant than that of republican.</p>
<table>
<thead>
<tr>
<th></th>
<th>（1)</th>
<th>（2)</th>
<th>（3）</th>
<th>（4）</th>
<th>（5）</th>
<th>（6）</th>
</tr>
</thead>
<tbody>
<tr>
<td>Republic</td>
<td>0.0063</td>
<td>0.0046</td>
<td></td>
<td></td>
<td>0.0063</td>
<td>0.0067</td>
</tr>
<tr>
<td></td>
<td>(1.397）</td>
<td>(1.472）</td>
<td></td>
<td></td>
<td>(1.3988)</td>
<td>(1.4729)</td>
</tr>
<tr>
<td>Democratic</td>
<td></td>
<td></td>
<td>0.0030**</td>
<td>0.0036**</td>
<td>0.0030**</td>
<td>0.0035**</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>(2.4665)</td>
<td>(2.8148)</td>
<td>(2.4671)</td>
<td>(2.8146)</td>
</tr>
<tr>
<td>Control</td>
<td></td>
<td>√</td>
<td></td>
<td>√</td>
<td></td>
<td>√</td>
</tr>
</tbody>
</table>
<p>When we test the same model by using Trump and Harris:</p>
<table>
<thead>
<tr>
<th></th>
<th>(7)</th>
<th>(8)</th>
<th>(9)</th>
<th>(10)</th>
<th>(11)</th>
<th>(12)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trump</td>
<td>0.0049</td>
<td>0.0047</td>
<td></td>
<td></td>
<td>0.0049</td>
<td>0.0047</td>
</tr>
<tr>
<td></td>
<td>(0.7591)</td>
<td>(0.7411)</td>
<td></td>
<td></td>
<td>(0.7596)</td>
<td>(0.7417)</td>
</tr>
<tr>
<td>Harris</td>
<td></td>
<td></td>
<td>0.0049**</td>
<td>0.0034***</td>
<td>0.0031**</td>
<td>0.0034***</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>(1.9467)</td>
<td>(2.1014)</td>
<td>(1.9465)</td>
<td>(2.1012)</td>
</tr>
<tr>
<td>Control</td>
<td></td>
<td>√</td>
<td></td>
<td>√</td>
<td></td>
<td>√</td>
</tr>
</tbody>
</table>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2025-03-10T00:00:00+08:00">Mon 10 March 2025</time>
            <h4>Category</h4>
            <a class="category-link" href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/categories.html#blog-2-ref">Blog 2</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/tags.html#group-nullpointer-ref">Group NullPointer
                    <span class="superscript">2</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="https://github.com/buehlmaier/MFIN7036-student-blog-2025-01" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="https://buehlmaier.github.io/MFIN7036-student-blog-2025-01/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>